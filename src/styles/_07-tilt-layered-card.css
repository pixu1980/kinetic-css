@layer pixu-talk {
  @layer topics {
    @layer tilt-layered-card {
      @property --tilt-card--pos-x {
        syntax: '<number>';
        inherits: true;
        initial-value: 0;
      }

      @property --tilt-card--pos-y {
        syntax: '<number>';
        inherits: true;
        initial-value: 0;
      }

      .card-container {
        --tilt-card--perspective: 60rem;
        --tilt-card--pos-x: 0;
        --tilt-card--pos-y: 0;

        width: 100%;
        height: 100%;
        display: grid;
        place-items: center;
        perspective: var(--tilt-card--perspective);

        cursor: grab;
        touch-action: none;
      }

      .card-container.is-dragging {
        cursor: grabbing;
      }

      .card-container * {
        transform-style: preserve-3d;
      }

      .card {
        --tilt-card--x: calc(var(--tilt-card--pos-y, 0.1) * -120deg);
        --tilt-card--y: calc(var(--tilt-card--pos-x, 0.1) * 120deg);

        position: relative;
        width: 70rem;
        height: 40rem;
        border: 2px solid #fff;
        border-radius: 1rem;
        pointer-events: none;
        user-select: none;

        transform: rotateX(var(--tilt-card--x)) rotateY(var(--tilt-card--y));

        transition: transform 800ms cubic-bezier(0.2, 0.85, 0.3, 1);
        will-change: transform;
      }

      .card-content {
        position: absolute;
        inset: 0;
        overflow: clip;
        backface-visibility: hidden;

        filter: drop-shadow(0 0 15px rgba(0, 245, 255, 0.6));

        perspective: calc(cos(var(--tilt-card--x)) * cos(var(--tilt-card--y)) * var(--tilt-card--perspective));
        perspective-origin: calc(50% - cos(var(--tilt-card--x)) * sin(var(--tilt-card--y)) * var(--tilt-card--perspective)) calc(50% + sin(var(--tilt-card--x)) * var(--tilt-card--perspective));
      }

      .card-layers {
        position: absolute;
        inset: 0;
      }

      .card-layer {
        position: absolute;
        inset: 0;

        display: flex;
        flex-flow: column;
        gap: 0;
        place-content: center;
        place-items: center;

        color: aquamarine;
        background-color: #0003;

        border: 2px solid currentColor;
        border-radius: 1rem;

        transform: translateZ(calc((sibling-index() - 1) * -2rem));

        img {
          width: 80%;
          height: auto;
          max-height: 60%;
          object-fit: contain;
          filter: drop-shadow(0 0 15px rgba(0, 245, 255, 0.6));
        }

        h2 {
          margin: 0;
          color: #3c4043;
          filter: drop-shadow(0 0 15px rgba(0, 245, 255, 0.6));
        }
      }

      .card-back {
        position: absolute;
        inset: 0;

        display: grid;
        place-items: center;

        color: #a9b4bd;
        background-color: #000;
        border-radius: 1rem;

        font-size: 8rem;

        rotate: y 180deg;
        backface-visibility: hidden;

        filter: drop-shadow(0 0 15px rgba(0, 245, 255, 0.6));

        p {
          filter: drop-shadow(0 0 15px rgba(0, 245, 255, 0.6));
        }
      }

      .present:has(:scope > .card-container) {
        .card-container:not(.is-dragging) {
          transition:
            --tilt-card--pos-x 800ms cubic-bezier(0.2, 0.85, 0.3, 1),
            --tilt-card--pos-y 800ms cubic-bezier(0.2, 0.85, 0.3, 1);
        }

        .card-container:not(:hover):not(.is-dragging) {
          animation: tilt-layered-card-autopilot 10s ease-in-out infinite;
        }
      }

      @keyframes tilt-layered-card-autopilot {
        0% {
          --tilt-card--pos-x: -0.15;
          --tilt-card--pos-y: 0.08;
        }

        25% {
          --tilt-card--pos-x: 0.35;
          --tilt-card--pos-y: -0.12;
        }

        55% {
          /* Around 180deg on rotateY: 120deg * 1.5 */
          --tilt-card--pos-x: 1.5;
          --tilt-card--pos-y: 0.06;
        }

        80% {
          --tilt-card--pos-x: 0.8;
          --tilt-card--pos-y: -0.08;
        }

        100% {
          --tilt-card--pos-x: -0.15;
          --tilt-card--pos-y: 0.08;
        }
      }
    }
  }
}
